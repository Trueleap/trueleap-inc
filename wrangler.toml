name = "trueleap-inc"
account_id = "b01357b51e0ceb9e37e2bdf82bbcbc34"
main = "./dist/_worker.js/index.js"
compatibility_date = "2026-02-04"
compatibility_flags = ["nodejs_compat"]

[assets]
binding = "ASSETS"
directory = "./dist"

[[r2_buckets]]
binding = "IMAGES_BUCKET"
bucket_name = "trueleap-images"

[vars]
PAYLOAD_URL = "https://cms.trueleapinc.com"

[observability]
enabled = true

# Dev: dev.trueleapinc.com
[env.dev]
routes = [
  { pattern = "dev.trueleapinc.com/*", zone_name = "trueleapinc.com" },
]
[env.dev.vars]
PAYLOAD_URL = "https://cms.trueleapinc.com"
[[env.dev.r2_buckets]]
binding = "IMAGES_BUCKET"
bucket_name = "trueleap-images"

# Preview: dev-preview.trueleapinc.com (always fetches draft content)
[env.preview]
routes = [
  { pattern = "dev-preview.trueleapinc.com/*", zone_name = "trueleapinc.com" },
]
[env.preview.vars]
PAYLOAD_URL = "https://cms.trueleapinc.com"
PAYLOAD_API_KEY = "daaae8e2-41e4-4c3b-bbc4-faa3ed424398"
DRAFT_MODE = "true"
[[env.preview.r2_buckets]]
binding = "IMAGES_BUCKET"
bucket_name = "trueleap-images"
[[env.preview.services]]
binding = "CMS"
service = "trueleap-cms-dev"
